---
title: Installation as Container(s)
subtitle: 
comments: false
weight: 26
---

This section describes how to install .Stat Suite services as container(s) using [Docker](https://www.docker.com/).<br>
**Note**: containerisation is commonly done with Docker containers and we will only explain here our most common scenarios using Docker Compose and our specific services and libraries.

### Principles

Containers ease developers' code and services' deployment in order to produce Docker images.<br>
Install Docker, then create containers hosting an application (a set of services) and its dependencies (e.g. lib and bins).<br>
Split your services into micro-services, isolate applications from each others, and Docker will help you packing and deploying the image(s) in an automated way.<br>
Create an image from a container. An image is a snapshot of your service(s). Images can be stored in a registry and IT operator can pick an image for deployment (to Dev, Staging or Prod).<br>
A good practice is to use the same image in different environments/containers.<br>

![container and docker infrastructure](/images/container-docker-infrastructure.png)

### References

Use **Docker** to build containers, each one dependent form the others. Multiples services (database, transfer API, share, config., etc...) implies scaling to multiple containers. Docker is installed in line with the [official Docker installation guidelines](https://docs.docker.com/install/overview/).<br>
Use **Docker Compose** to define and run a multi-container Docker application's services. Docker Compose is installed in line with the [official Docker Compose installation guidelines](https://docs.docker.com/compose/install/).<br>

### .Stat Suite Docker images

All images are under https://cloud.docker.com/u/siscc/repository/list.<br>

#### NSI web service
SDMX compliant REST web service developed by [Eurostat](https://webgate.ec.europa.eu/CITnet/stash/projects/SDMXRI/repos/nsiws.net/browse/README.md?at=refs%2Fheads%2Fdevelop) and enriched with OECD data retieval. NSI web servcie allows data and structural metadata and submisison of structural metadata. Plugin docker image is using a vanilla Eurostat NSI service as a [base image](https://cloud.docker.com/u/siscc/repository/docker/siscc/sdmxri-nsi).<br>
**Links**:<br>
- Docker image with plugin https://cloud.docker.com/u/siscc/repository/docker/siscc/dotstatsuite-core-sdmxri-nsi
- Original Eurostat's docker https://cloud.docker.com/u/siscc/repository/docker/siscc/sdmxri-nsi
- Plugin git https://gitlab.com/sis-cc/.stat-suite/dotstatsuite-core-sdmxri-nsi-plugin/tree/develop
- Eurostat git https://webgate.ec.europa.eu/CITnet/stash/projects/SDMXRI/repos/nsiws.net/browse?at=refs%2Fheads%2Fdevelop<br>
**Configuration** see details [here](https://gitlab.com/snippets/1851148#configuration)

#### Transfer service
The Transfer service provides an API for:<br>
- Import of SDMX data files (csv, xml) into dissemination database
- Import of mapped Excel files with data into dissemination database
- Transfer of data between databases
For a full list of API methods and parameters, see the autogenerated Swagger documentation http://transfer-service-url/swagger/v1.0/swagger.json.<br>
For the simple UI once service is running navigate to http://transfer-service-url/swagger.<br>
**Links**:
- docker https://cloud.docker.com/u/siscc/repository/docker/siscc/dotstatsuite-core-transfer
- git https://gitlab.com/sis-cc/.stat-suite/dotstatsuite-core-transfer/tree/develop<br>
**Configuration** see details [here](https://gitlab.com/snippets/1851148#configuration-1)

#### Dependency: common nugget
Common library contains methods and classes shared between other projects and servcies. These inlude logs, localisation and configuration.<br>
**Links**:
- repository https://www.nuget.org/packages/DotStat.Common/
- git https://gitlab.com/sis-cc/.stat-suite/dotstatsuite-core-common/tree/develop

#### Dependency: data access nugget
Data access library contains database specific logic shared by NSI web service plugin and Transfer service.<br>
**Links**:
- repository https://www.nuget.org/packages/DotStat.DataAccess.NuGet/
- git https://gitlab.com/sis-cc/.stat-suite/dotstatsuite-core-data-access/tree/develop

#### Data Explorer
Is forked from https://gitlab.com/sis-cc/.stat-suite/dotstatsuite-webapp (boilerplate to help crafting web application fully integrated within dotstat-data-explorer-suite). It is server-side rendered (configuration is injected in index.html)no request required from the client to get the configuration. Client bundle expects configuration in `window.SETTINGS`, `window.I18N`and `window.CONFIG`for those who want to directly use the static files.<br>
**Links**:
- repository: https://gitlab.com/sis-cc/.stat-suite/dotstatsuite-data-explorer
- docker: https://cloud.docker.com/u/siscc/repository/docker/siscc/dotstatsuite-data-explorer

#### Share service
A Redis database is used to store shared objects (tables or charts). Share server is not auth protected, so any robot can spam it. In order to avoid it, many mechanisms are in place:<br>
- tables/charts are temporary stored only during `redisChartTTL` seconds before beeing deleted unless beeing confirmed
- share server check POST calls rates, over `maxRatePerIP` per second, POST calls, per IP, are rejected with a 419 HTTP code
- POST body are size limited to `maxChartSize` <br>
**Links**:
- repository: https://gitlab.com/sis-cc/.stat-suite/dotstatsuite-share
- docker: https://cloud.docker.com/u/siscc/repository/docker/siscc/dotstatsuite-share

#### Proxy
The Proxy handles route request depending on urls (`https://<app>.<env>.<tenant>.redpelicans.com`), and sets tenant headers depending on host to instruct tager application. `<tenant>.redpelicans.com` could be replaced by a dedicated DNS entry, e.g. `https://<app>.<env>.oecd.org`.<br>
**Links**:
- repository: https://gitlab.com/sis-cc/.stat-suite/dotstatsuite-proxy
- docker: https://cloud.docker.com/u/siscc/repository/docker/siscc/dotstatsuite-kube-proxy

#### Configuration
The Configuration service centralises all configuration resources used by other services. It is a web server providing requested configuration, not exposed to users. based on git versioned configuration data.<br>
**Links**:
- repository: https://gitlab.com/sis-cc/.stat-suite/dotstatsuite-config
- docker: https://cloud.docker.com/u/siscc/repository/docker/siscc/dotstatsuite-config-dev

#### Search service
The Search service named SDMX Faceted Search (sfs) is a JSON http server offering faceted search on SDMX dataflows. A static schema is defined in the config. A dynamic schema is derivated from dataflows.<br>
**Links**:
- repository: https://gitlab.com/sis-cc/.stat-suite/dotstatsuite-sdmx-faceted-search
- docker: https://cloud.docker.com/u/siscc/repository/docker/siscc/dotstatsuite-sdmx-faceted-search